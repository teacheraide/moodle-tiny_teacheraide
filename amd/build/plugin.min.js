define(["editor_tiny/loader","editor_tiny/utils","core/str","core/modal_factory"],function(f,i,p,y){"use strict";const r="tiny_teacheraide/plugin",l="tiny_teacheraide",c=`${l}_menuitem`,h="",b=t=>{let e=t.toolbar;return e=i.addToolbarButtons(e,"content",[c]),e},M=t=>{let e=t.menu;return e=i.addMenubarItem(e,"tools",[c].join(" ")),e},_=Object.freeze(Object.defineProperty({__proto__:null,configure:t=>({toolbar:b(t),menu:M(t)})},Symbol.toStringTag,{value:"Module"})),C=async()=>{const t=await y.create({id:"chat-modal",body:'<teacheraide-simple-chat id="teacheraide-modal-chatbox" class="teacheraide-simple-chat"/>'}),[e]=await Promise.all([p.getString("pluginname",l)]);return d=>{d.ui.registry.addMenuItem(c,{icon:h,text:e,onAction:s=>{const o=s.currentTarget||document.activeElement;console.log("Teacher Aide Button Clicked",o);let m="",n=o.closest('[data-fieldtype="editor"]')||o.closest(".form-textarea");if(n!=null){console.log("modal Content",n),console.log("modal Content id",n.id);const u=n.querySelector("iframe");console.log("modal iframe",u),console.log("modal iframe id",u.id),m=u.id}t.show();const g=document.getElementById("teacheraide-modal-chatbox"),a=g.closest(".modal-content");a.style.position="fixed",a.style.right="0px",a.style.top="0px",a.style.width="400px",g.setAttribute("data-iframe-target",m)}})}};return new Promise(async t=>{const[e,d,s]=await Promise.all([f.getTinyMCE(),i.getPluginMetadata(l,r),C()]);e.PluginManager.add(r,o=>(s(o),d)),t([r,_])})});
//# sourceMappingURL=plugin.min.js.map
