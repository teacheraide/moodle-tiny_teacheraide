define(["editor_tiny/loader","editor_tiny/utils","core/str","core/modal_factory"],function(y,i,f,p){"use strict";const r="tiny_teacheraide/plugin",l="tiny_teacheraide",c=`${l}_menuitem`,h="",b=e=>{let t=e.toolbar;return t=i.addToolbarButtons(t,"content",[c]),t},M=e=>{let t=e.menu;return t=i.addMenubarItem(t,"tools",[c].join(" ")),t},_=Object.freeze(Object.defineProperty({__proto__:null,configure:e=>({toolbar:b(e),menu:M(e)})},Symbol.toStringTag,{value:"Module"})),C=async()=>{const e=await p.create({id:"chat-modal",body:'<teacheraide-simple-chat id="teacheraide-modal-chatbox"/>'}),[t]=await Promise.all([f.getString("pluginname",l)]);return d=>{d.ui.registry.addMenuItem(c,{icon:h,text:t,onAction:s=>{const o=s.currentTarget||document.activeElement;console.log("Teacher Aide Button Clicked",o);let m="";const n=o.closest('[data-fieldtype="editor"]');if(n!=null){console.log("modal Content",n),console.log("modal Content id",n.id);const u=n.querySelector("iframe");console.log("modal iframe",u),console.log("modal iframe id",u.id),m=u.id}e.show();const g=document.getElementById("teacheraide-modal-chatbox"),a=g.closest(".modal-content");a.style.position="fixed",a.style.right="0px",a.style.top="0px",a.style.width="400px",g.setAttribute("data-iframe-target",m)}})}};return new Promise(async e=>{const[t,d,s]=await Promise.all([y.getTinyMCE(),i.getPluginMetadata(l,r),C()]);t.PluginManager.add(r,o=>(s(o),d)),e([r,_])})});
//# sourceMappingURL=plugin.min.js.map
