{"version":3,"file":"plugin.min.js","sources":["../../vue/src/common.js","../../vue/src/configuration.js","../../vue/src/commands.js","../../vue/src/plugin.js"],"sourcesContent":["export const pluginName = \"tiny_teacheraide/plugin\";\nexport const component = \"tiny_teacheraide\";\nexport const teacherAideMenuItemName = `${component}_menuitem`;\nexport const icon = \"\";\n","import { teacherAideMenuItemName } from \"./common\";\nimport { addMenubarItem, addToolbarButtons } from \"editor_tiny/utils\";\n\nconst getToolbarConfiguration = (instanceConfig) => {\n  let toolbar = instanceConfig.toolbar;\n  toolbar = addToolbarButtons(toolbar, \"content\", [teacherAideMenuItemName]);\n\n  return toolbar;\n};\n\nconst getMenuConfiguration = (instanceConfig) => {\n  let menu = instanceConfig.menu;\n  menu = addMenubarItem(menu, \"tools\", [teacherAideMenuItemName].join(\" \"));\n\n  return menu;\n};\n\nexport const configure = (instanceConfig) => {\n  return {\n    toolbar: getToolbarConfiguration(instanceConfig),\n    menu: getMenuConfiguration(instanceConfig),\n  };\n};\n","import { getString } from \"core/str\";\nimport ModalFactory from 'core/modal_factory';\nimport { component, teacherAideMenuItemName, icon } from \"./common\";\n\n\n\n\nexport const getSetup = async () => {\n  const modal = await ModalFactory.create({\n    id: \"chat-modal\",\n    body: '<teacheraide-simple-chat id=\"teacheraide-modal-chatbox\" class=\"teacheraide-simple-chat\"/>',\n  });\n  \n\n  const [buttonTooltip] = await Promise.all([\n    getString(\"pluginname\", component),\n  ]);\n\n  return (editor) => {\n    editor.ui.registry.addMenuItem(teacherAideMenuItemName, {\n      icon,\n      text: buttonTooltip,\n      onAction: (event) => {\n\n        const button = event.currentTarget || document.activeElement;\n        console.log(\"Teacher Aide Button Clicked\",button);\n\n        //const modalBody = button.closest('.modal-body');\n\n        let iframeTargetId = '';\n        let modalContent = button.closest('[data-fieldtype=\"editor\"]')||button.closest('.form-textarea');\n\n        if(modalContent!=undefined){\n\n          console.log(`modal Content`,modalContent);\n          console.log(`modal Content id`,modalContent.id);\n\n          const iframe = modalContent.querySelector(\"iframe\");\n\n          console.log(`modal iframe`,iframe);\n          console.log(`modal iframe id`,iframe.id);\n          iframeTargetId = iframe.id;\n\n        }\n        \n        //const modalChat = document.getElementById(\"modal-teacheraide-chat\");\n        //if(modalChat==undefined){\n        //  const newElement = document.createElement('teacheraide-simple-chat');\n        //  newElement.style.height = '80%';\n        //  newElement.id = \"modal-teacheraide-chat\"\n//\n        //  if (modalBody.nextSibling) {\n        //    modalBody.parentNode.insertBefore(newElement, modalBody.nextSibling);\n        //  } else {\n        //    modalBody.parentNode.appendChild(newElement);\n        //  }\n        //}\n        \n        modal.show();\n        const teachermodal = document.getElementById(\"teacheraide-modal-chatbox\");\n        const teacherModalParent = teachermodal.closest('.modal-content');\n        teacherModalParent.style.position = 'fixed';\n        teacherModalParent.style.right = '0px';\n        teacherModalParent.style.top = '0px';\n        teacherModalParent.style.width = '400px';\n        teachermodal.setAttribute('data-iframe-target', iframeTargetId);\n      },\n    });\n  };\n};\n\n","import { getTinyMCE } from \"editor_tiny/loader\";\nimport { getPluginMetadata } from \"editor_tiny/utils\";\n\nimport { component, pluginName } from \"./common\";\nimport * as Configuration from \"./configuration\";\nimport * as Commands from \"./commands\";\n\n// eslint-disable-next-line no-async-promise-executor\nexport default new Promise(async (resolve) => {\n  const [tinyMCE, pluginMetadata, setupCommands] = await Promise.all([\n    getTinyMCE(),\n    getPluginMetadata(component, pluginName),\n    Commands.getSetup(),\n  ]);\n\n  tinyMCE.PluginManager.add(pluginName, (editor) => {\n    setupCommands(editor);\n\n    return pluginMetadata;\n  });\n\n  resolve([pluginName, Configuration]);\n});\n"],"names":["pluginName","component","teacherAideMenuItemName","icon","getToolbarConfiguration","instanceConfig","toolbar","addToolbarButtons","getMenuConfiguration","menu","addMenubarItem","getSetup","modal","ModalFactory","buttonTooltip","getString","editor","event","button","iframeTargetId","modalContent","iframe","teachermodal","teacherModalParent","resolve","tinyMCE","pluginMetadata","setupCommands","getTinyMCE","getPluginMetadata","Commands.getSetup","Configuration"],"mappings":"iHAAO,MAAMA,EAAa,0BACbC,EAAY,mBACZC,EAA0B,GAAGD,CAAS,YACtCE,EAAO,GCAdC,EAA2BC,GAAmB,CAClD,IAAIC,EAAUD,EAAe,QAC7B,OAAAC,EAAUC,EAAiB,kBAACD,EAAS,UAAW,CAACJ,CAAuB,CAAC,EAElEI,CACT,EAEME,EAAwBH,GAAmB,CAC/C,IAAII,EAAOJ,EAAe,KAC1B,OAAAI,EAAOC,EAAAA,eAAeD,EAAM,QAAS,CAACP,CAAuB,EAAE,KAAK,GAAG,CAAC,EAEjEO,CACT,kEAE0BJ,IACjB,CACL,QAASD,EAAwBC,CAAc,EAC/C,KAAMG,EAAqBH,CAAc,CAC7C,0CCdaM,EAAW,SAAY,CAClC,MAAMC,EAAQ,MAAMC,EAAa,OAAO,CACtC,GAAI,aACJ,KAAM,2FACV,CAAG,EAGK,CAACC,CAAa,EAAI,MAAM,QAAQ,IAAI,CACxCC,EAAS,UAAC,aAAcd,CAAS,CACrC,CAAG,EAED,OAAQe,GAAW,CACjBA,EAAO,GAAG,SAAS,YAAYd,EAAyB,CACtD,KAAAC,EACA,KAAMW,EACN,SAAWG,GAAU,CAEnB,MAAMC,EAASD,EAAM,eAAiB,SAAS,cAC/C,QAAQ,IAAI,8BAA8BC,CAAM,EAIhD,IAAIC,EAAiB,GACjBC,EAAeF,EAAO,QAAQ,2BAA2B,GAAGA,EAAO,QAAQ,gBAAgB,EAE/F,GAAGE,GAAc,KAAU,CAEzB,QAAQ,IAAI,gBAAgBA,CAAY,EACxC,QAAQ,IAAI,mBAAmBA,EAAa,EAAE,EAE9C,MAAMC,EAASD,EAAa,cAAc,QAAQ,EAElD,QAAQ,IAAI,eAAeC,CAAM,EACjC,QAAQ,IAAI,kBAAkBA,EAAO,EAAE,EACvCF,EAAiBE,EAAO,EAEzB,CAeDT,EAAM,KAAI,EACV,MAAMU,EAAe,SAAS,eAAe,2BAA2B,EAClEC,EAAqBD,EAAa,QAAQ,gBAAgB,EAChEC,EAAmB,MAAM,SAAW,QACpCA,EAAmB,MAAM,MAAQ,MACjCA,EAAmB,MAAM,IAAM,MAC/BA,EAAmB,MAAM,MAAQ,QACjCD,EAAa,aAAa,qBAAsBH,CAAc,CAC/D,CACP,CAAK,CACL,CACA,SC7De,IAAI,QAAQ,MAAOK,GAAY,CAC5C,KAAM,CAACC,EAASC,EAAgBC,CAAa,EAAI,MAAM,QAAQ,IAAI,CACjEC,aAAY,EACZC,EAAiB,kBAAC5B,EAAWD,CAAU,EACvC8B,EAAmB,CACvB,CAAG,EAEDL,EAAQ,cAAc,IAAIzB,EAAagB,IACrCW,EAAcX,CAAM,EAEbU,EACR,EAEDF,EAAQ,CAACxB,EAAY+B,CAAa,CAAC,CACrC,CAAC"}